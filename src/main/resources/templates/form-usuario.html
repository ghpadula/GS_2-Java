<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${usuario.id != null} ? 'Editar Usuário - UP SKILLING' : 'Novo Usuário - UP SKILLIING'">
        Formulário Usuário
    </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="/dashboard">
            <i class="fas fa-graduation-cap"></i> Upskilling 2030
        </a>
        <div class="navbar-nav ms-auto">
                <span class="navbar-text me-3">
                    <i class="fas fa-user"></i>
                    <span th:text="${usuarioLogado.nome}">Usuário</span>
                    <span th:if="${usuarioLogado.admin}" class="badge bg-warning">Admin</span>
                </span>
            <a class="btn btn-outline-light btn-sm" href="/logout">
                <i class="fas fa-sign-out-alt"></i> Sair
            </a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/dashboard">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="/usuarios">Usuários</a></li>
            <li class="breadcrumb-item active" th:text="${usuario.id != null} ? 'Editar Usuário' : 'Novo Usuário'">
                Formulário
            </li>
        </ol>
    </nav>

    <div class="card">
        <div class="card-header" th:classappend="${usuario.id != null} ? 'bg-warning' : 'bg-primary'">
            <h4 class="card-title mb-0 text-white">
                <i th:classappend="${usuario.id != null} ? 'fas fa-edit' : 'fas fa-plus'"></i>
                <span th:text="${usuario.id != null} ? 'Editar Usuário' : 'Novo Usuário'">
                        Formulário
                    </span>
            </h4>
        </div>
        <div class="card-body">
            <form th:action="${usuario.id != null} ? @{/usuarios/{id}(id=${usuario.id})} : @{/usuarios}"
                  method="post"
                  th:object="${usuario}">

                <div class="mb-3">
                    <label for="nome" class="form-label">Nome Completo *</label>
                    <input type="text"
                           class="form-control"
                           id="nome"
                           th:field="*{nome}"
                           required
                           placeholder="Digite o nome completo">
                    <div class="form-text text-danger" th:if="${#fields.hasErrors('nome')}"
                         th:errors="*{nome}">
                        Erro no nome
                    </div>
                </div>

                <div class="mb-3">
                    <label for="email" class="form-label">Email *</label>
                    <input type="email"
                           class="form-control"
                           id="email"
                           th:field="*{email}"
                           required
                           placeholder="Digite o email">
                    <div class="form-text text-danger" th:if="${#fields.hasErrors('email')}"
                         th:errors="*{email}">
                        Erro no email
                    </div>
                </div>

                <div class="mb-3">
                    <label for="areaAtuacao" class="form-label">Área de Atuação</label>
                    <input type="text"
                           class="form-control"
                           id="areaAtuacao"
                           th:field="*{areaAtuacao}"
                           placeholder="Ex: Tecnologia, Marketing, Saúde">
                </div>

                <div class="mb-3">
                    <label for="nivelCarreira" class="form-label">Nível de Carreira</label>
                    <select class="form-control"
                            id="nivelCarreira"
                            th:field="*{nivelCarreira}">
                        <option value="">Selecione o nível</option>
                        <option value="Estagiário">Estagiário</option>
                        <option value="Júnior">Júnior</option>
                        <option value="Pleno">Pleno</option>
                        <option value="Sênior">Sênior</option>
                        <option value="Especialista">Especialista</option>
                        <option value="Gerente">Gerente</option>
                        <option value="Diretor">Diretor</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="senha" class="form-label">
                        Senha
                        <span th:if="${usuario.id == null}">*</span>
                        <span th:if="${usuario.id != null}" class="text-muted">(Deixe em branco para manter a atual)</span>
                    </label>
                    <input type="password"
                           class="form-control"
                           id="senha"
                           th:field="*{senha}"
                           th:required="${usuario.id == null}"
                           placeholder="Digite a senha">
                    <div class="form-text text-danger" th:if="${#fields.hasErrors('senha')}"
                         th:errors="*{senha}">
                        Erro na senha
                    </div>
                </div>

                <div th:if="${usuario.id != null and usuario.id != usuarioLogado.id}" class="mb-3">
                    <div class="form-check">
                        <input class="form-check-input"
                               type="checkbox"
                               id="admin"
                               th:field="*{admin}">
                        <label class="form-check-label" for="admin">
                            Usuário Administrador
                        </label>
                    </div>
                    <div class="form-text">
                        Usuários administradores têm acesso completo ao sistema.
                    </div>
                </div>

                <div class="mt-4">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        <span th:text="${usuario.id != null} ? 'Atualizar Usuário' : 'Criar Usuário'">
                                Salvar
                            </span>
                    </button>
                    <a href="/usuarios" class="btn btn-outline-secondary">
                        <i class="fas fa-times"></i> Cancelar
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>